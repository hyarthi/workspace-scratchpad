<<<<<<< HEAD
{"version":3,"sources":["webpack:///./src async","webpack:///./src/app/annotation.ts","webpack:///./src/app/api.service.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.routes.ts","webpack:///./src/app/canvas-drawer.service.ts","webpack:///./src/app/canvas.component.css","webpack:///./src/app/canvas.component.html","webpack:///./src/app/canvas.component.ts","webpack:///./src/app/d3-force-link.ts","webpack:///./src/app/d3-force-node.ts","webpack:///./src/app/error.component.html","webpack:///./src/app/error.component.ts","webpack:///./src/app/message.ts","webpack:///./src/app/moment-map.ts","webpack:///./src/app/space.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./src async recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = ./src async recursive\n// module chunks = 1","export class Annotation {\r\n\tid: string;\r\n\tmsgId: string;\r\n\tspaceId: string;\r\n\tcreated: Date;\r\n\tcreatedBy: string;\r\n\tfields: any[];\r\n\r\n\tconstructor(inObj: any) {\r\n\t\tthis.fields = [];\r\n\t\tfor (let field in inObj) {\r\n\t\t\tif (typeof field !== 'string') {\r\n\t\t\t\tconsole.log(\"not a string: \" + field + \"(\" + typeof field + \")\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tswitch(field) {\r\n\t\t\t\tcase '_id':\r\n\t\t\t\t\tthis.id = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'annotationId':\r\n\t\t\t\t\tthis.id = (this.id ? this.id : inObj[field]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'msgId':\r\n\t\t\t\t\tthis.msgId = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'created':\r\n\t\t\t\t\tthis.created = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'createdBy':\r\n\t\t\t\t\tthis.createdBy = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'spaceId':\r\n\t\t\t\t\tthis.spaceId = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.fields[field] = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/annotation.ts","import { Injectable } from '@angular/core';\r\nimport { Http, Headers, Response } from '@angular/http';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/catch';\r\nimport 'rxjs/add/operator/map';\r\n\r\nimport { Annotation } from './annotation';\r\nimport { Message } from './message';\r\n\r\n@Injectable()\r\nexport class APIService {\r\n\tprivate urlList: any;\r\n\r\n\tconstructor(private http: Http) {\r\n\t\tthis.urlList = {\r\n\t\t\tbase: '/api',\r\n\t\t\tspace: {\r\n\t\t\t\tbase: '/api/space',\r\n\t\t\t\tinit: function (id: string) : string {\r\n\t\t\t\t\treturn '/api/space/' + encodeURI(id) + '/init'\r\n\t\t\t\t},\r\n\t\t\t\tat: function (id: string) : string {\r\n\t\t\t\t\treturn '/api/space/' + encodeURI(id);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tannotations: {\r\n\t\t\t\tget: function(spaceId: string, start: number, limit: number) : string {\r\n\t\t\t\t\treturn '/api/space/' + encodeURI(spaceId) + '/ant?start=' + start + '&limit=' + limit;\r\n\t\t\t\t},\r\n\t\t\t\tat: function(id: string, spaceId?: string) : string {\r\n\t\t\t\t\t//STUB\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\t\t\t\tmoments: {\r\n\t\t\t\t\tget: function(spaceId: string, start: number, limit: number): string {\r\n\t\t\t\t\t\treturn '/api/space/' + encodeURI(spaceId) + '/moments?start=' + start + '&limit=' + limit;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmessages: {\r\n\t\t\t\tbetween: function(spaceId: string, startDate: Date, endDate: Date, start: number, limit: number): string {\r\n\t\t\t\t\treturn '/api/space/' + encodeURI(spaceId) + '/messages?startDate=' + startDate.getTime() + '&endDate=' + endDate.getTime() + '&start=' + start + '&limit=' + limit;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tinitSpace(id: string): Observable<any> {\r\n\t\treturn this.http.get(this.urlList.space.init(id)).map<Response, any>(response => {\r\n\t\t\tlet resp = response.json();\r\n\t\t\treturn resp;\r\n\t\t});\r\n\t}\r\n\r\n\tgetAnnotations(spaceId: string, type?: AnnotationType, start?: number, limit?: number): Observable<Annotation[]> {\r\n\t\tlet skip = (start ? start : 0);\r\n\t\tlet lmt = (limit ? limit : 25);\r\n\t\tlet qUrl = \"\";\r\n\t\tswitch(type) {\r\n\t\tcase AnnotationType.MOMENT:\r\n\t\t\tqUrl = this.urlList.annotations.moments.get(spaceId, skip, lmt);\r\n\t\t\tbreak;\r\n\t\tcase AnnotationType.ALL:\r\n\t\tdefault:\r\n\t\t\tqUrl = this.urlList.annotations.get(spaceId, skip, lmt);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.http.get(qUrl).map<Response, Annotation[]>(response => {\r\n\t\t\tif (response.status !== 200) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tlet resp = response.json();\r\n\t\t\tlet annos: Annotation[] = [];\r\n\t\t\t//console.log(resp);\r\n\t\t\tfor (let i = 0; i < resp.length; i++) {\r\n\t\t\t\tlet anno = new Annotation(resp[i]);\r\n\t\t\t\tannos[i] = anno;\r\n\t\t\t}\r\n\r\n\t\t\treturn annos;\r\n\t\t});\r\n\t}\r\n\r\n\tgetMessagesBetween(spaceId: string, startDate: any, endDate: any, start?: number, limit?: number): Observable<Message[]> {\r\n\t\tlet skip = (start ? start : 0);\r\n\t\tlet lmt = (limit ? limit : 25);\r\n\t\tlet qUrl = this.urlList.messages.between(spaceId, new Date(startDate), new Date(endDate), start, limit);\r\n\t\treturn this.http.get(qUrl).map<Response, Message[]>(response => {\r\n\t\t\tif (response.status !== 200) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tlet resp = response.json();\r\n\t\t\tlet msgs: Message[] = [];\r\n\t\t\tfor (let i = 0; i < resp.length; i++) {\r\n\t\t\t\tlet msg = new Message(resp[i]);\r\n\t\t\t\tmsgs[i] = msg;\r\n\t\t\t}\r\n\t\t\treturn msgs;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport enum AnnotationType {\r\n\tALL,\r\n\tMOMENT,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/api.service.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = ./src/app/app.component.css\n// module chunks = 1","module.exports = \"<!--The whole content below can be removed with the new code.-->\\n<div style=\\\"width:100%;height:100%\\\">\\n\\t<router-outlet></router-outlet>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = ./src/app/app.component.html\n// module chunks = 1","import { Component } from '@angular/core';\n\n@Component({\n\tselector: 'app-root',\n\ttemplateUrl: './app.component.html',\n\tstyleUrls: ['./app.component.css'],\n})\nexport class AppComponent {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n//import { RouterModule, Routes } from '@angular/router';\nimport { HttpModule } from '@angular/http';\n\nimport { AppComponent } from './app.component';\nimport { AppRoutesModule } from './app.routes';\nimport { APIService } from './api.service';\nimport { CanvasComponent } from './canvas.component';\nimport { ErrorComponent } from './error.component';\n\n/*const appRoutes: Routes = [\n\t{ path: '', redirectTo: '/error', pathMatch: 'full' },\n\t{ path: 'canvas/:id', component: CanvasComponent },\n\t{ path: 'error', component: ErrorComponent },\n\t{ path: '**', redirectTo: '/error' }\n];*/\n\n//const routingProviders: any[] = [];\n\n@NgModule({\n\timports: [\n\t\tBrowserModule,\n\t\tFormsModule,\n\t\tHttpModule,\n\t\tAppRoutesModule\n\t\t//routingProviders,\n\t\t//RouterModule.forRoot(appRoutes, {enableTracing: true})\n\t],\n\tdeclarations: [\n\t\tAppComponent,\n\t\tCanvasComponent,\n\t\tErrorComponent\n\t],\n\tproviders: [ APIService ],\n\tbootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes, provideRoutes } from '@angular/router';\r\n\r\nimport { CanvasComponent } from './canvas.component';\r\nimport { ErrorComponent } from './error.component';\r\n\r\nconst appRoutes: Routes = [\r\n\t{ path: 'canvas/:id', component: CanvasComponent },\r\n\t{ path: 'error', component: ErrorComponent },\r\n\t{ path: '', redirectTo: '/error', pathMatch: 'full' },\r\n\t{ path: '**', redirectTo: '/error' }\r\n];\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tRouterModule.forRoot(appRoutes)\r\n\t],\r\n\texports: [\r\n\t\tRouterModule\r\n\t]\r\n})\r\nexport class AppRoutesModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.routes.ts","import { Injectable } from '@angular/core';\r\n\r\nimport { MomentMap } from './moment-map';\r\nimport { DiagramDrawer } from './diagram-drawer.interface';\r\nimport { APIService } from './api.service';\r\n\r\n\r\ndeclare var d3: any;\r\n\r\n@Injectable()\r\nexport class CanvasDrawerService {\r\n\tcontentId: string;\r\n\twidth: number;\r\n\theight: number;\r\n\tcurrentOffset: any;\r\n\tcurrentZoom: number;\r\n\tzoomThreshold: number;\r\n\txscale: any;\r\n\tyscale: any;\r\n\tzscale: any;\r\n\tdiagram: DiagramDrawer;\r\n\r\n\tconstructor( private api : APIService ) {\r\n\t\tthis.width = 960;\r\n\t\tthis.height = 600;\r\n\t\tthis.zoomThreshold = 2.5;\r\n\t\tthis.currentOffset = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t};\r\n\t\tthis.currentZoom = 1.0;\r\n\t}\r\n\r\n\tsetContentId(id: string) {\r\n\t\tthis.contentId = (id.startsWith('#') ? id : '#' + id);\r\n\t}\r\n\r\n\tdrawDiagram(type: DiagramType, spaceId: string) {\r\n\t\tconsole.log('d3 is');\r\n\t\tconsole.log(d3);\r\n\t\tthis.xscale = d3.scaleLinear()\r\n\t\t\t\t\t\t.domain([0, this.width])\r\n\t\t\t\t\t\t.range([0, this.width]);\r\n\t\tthis.yscale = d3.scaleLinear()\r\n\t\t\t\t\t\t.domain([0, this.height])\r\n\t\t\t\t\t\t.range([0, this.height]);\r\n\t\tthis.zscale = d3.scaleLinear()\r\n\t\t\t\t\t\t.domain([1,6])\r\n\t\t\t\t\t\t.range([1,6])\r\n\t\t\t\t\t\t.clamp(true);\r\n\t\t// TODO: clear canvas here\r\n\t\t//\r\n\t\t// <--- returning to function flow\r\n\t\tswitch(type) {\r\n\t\tcase DiagramType.MOMENT_MAP:\r\n\t\t\tthis.drawMomentMap(spaceId);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawMomentMap(spaceId : string) : void {\r\n\t\tthis.diagram = new MomentMap(this.contentId, this.height, this.width, spaceId);\r\n\t\tthis.diagram.init(this.api);\r\n\t}\r\n}\r\n\r\nexport enum DiagramType {\r\n\tMOMENT_TREE,\r\n\tMOMENT_MAP\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/canvas-drawer.service.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div.canvas {\\r\\n\\tborder-width: 5px !important;\\r\\n\\tborder-color: #000 !important;\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tmin-height: 10cm;\\r\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/canvas.component.css\n// module id = ./src/app/canvas.component.css\n// module chunks = 1","module.exports = \"<div>\\r\\n\\t<div #canvas id=\\\"canvas\\\" class=\\\"canvas\\\">\\r\\n\\t\\t<div #canvasPlaceholder id=\\\"canvasPlaceholder\\\">\\r\\n\\t\\t\\t<img #canvasPlaceholderImg id=\\\"canvasPlaceholderImg\\\" src=\\\"/images/loading.gif\\\" />\\r\\n\\t\\t</div>\\r\\n\\t\\t<div #canvasContent id=\\\"canvasContent\\\" style=\\\"display:none;\\\"></div>\\r\\n\\t</div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/canvas.component.html\n// module id = ./src/app/canvas.component.html\n// module chunks = 1","import { Component, OnInit, Renderer2, ViewChild, ElementRef, AfterContentInit, ApplicationRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\nimport { APIService } from './api.service';\r\nimport { CanvasDrawerService, DiagramType } from './canvas-drawer.service';\r\nimport { Space, SPACE_STATE } from './space';\r\nimport { Annotation } from './annotation';\r\n\r\n@Component({\r\n\ttemplateUrl: './canvas.component.html',\r\n\tstyleUrls: ['./canvas.component.css'],\r\n\tproviders: [ APIService, CanvasDrawerService ]\r\n})\r\nexport class CanvasComponent implements OnInit {\r\n\r\n\tspace: Space;\r\n\tprivate sub: any;\r\n\t@ViewChild('canvas', {read: ElementRef}) canvasRef: ElementRef;\r\n\t@ViewChild('canvasPlaceholder', {read: ElementRef}) placeholderRef: ElementRef;\r\n\t@ViewChild('canvasContent', {read: ElementRef}) contentRef: ElementRef;\r\n\tdiagram: DiagramType;\r\n\tannos: Annotation[];\r\n\r\n\tconstructor(private api: APIService, private route: ActivatedRoute, private router: Router, private renderer: Renderer2, private app: ApplicationRef, private drawer: CanvasDrawerService) {\r\n\t\t// default diagram type\r\n\t\tthis.diagram = DiagramType.MOMENT_TREE;\r\n\t\t// init\r\n\t\tthis.annos = [];\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\t// get :id\r\n\t\tthis.sub = this.route.params.subscribe(params => {\r\n\t\t\t// if no :id then no sense to continue\r\n\t\t\tif (!params['id']) {\r\n\t\t\t\tthis.router.navigateByUrl('/error');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// we have an :id\r\n\t\t\t// init space\r\n\t\t\tthis.space = new Space(params['id']);\r\n\t\t\t// DEBUG\r\n\t\t\tconsole.log(\"canvas: \" + typeof this.canvasRef);\r\n\t\t\tconsole.log(\"placeholder: \" + typeof this.placeholderRef);\r\n\t\t\tconsole.log(\"content: \" + typeof this.contentRef);\r\n\t\t\t// load space\r\n\t\t\tthis.loadSpaceData();\r\n\t\t\t//this.app.tick();\r\n\t\t});\r\n\t}\r\n\r\n\tloadSpaceData(): void {\r\n\t\tif (this.space.state === SPACE_STATE.LOADED) {\r\n\t\t\t// reload\r\n\t\t\t//STUB\r\n\t\t} else {\r\n\t\t\t// initialize\r\n\t\t\tthis.api.initSpace(this.space.id).subscribe(spc => {\r\n\t\t\t\t// process \r\n\t\t\t\tconsole.log('processing space data...');\r\n\t\t\t\t// fill content div\r\n\t\t\t\tconsole.log('setting content');\r\n\t\t\t\tthis.space.loadServerData(spc);\r\n\t\t\t\t//this.renderer.setProperty(this.contentRef.nativeElement, 'innerHTML', JSON.stringify(this.space));\r\n\t\t\t\t// switch contents\r\n\t\t\t\tconsole.log('hiding placeholder');\r\n\t\t\t\tconsole.log(this.placeholderRef);\r\n\t\t\t\tthis.renderer.setStyle(this.placeholderRef.nativeElement, 'display', 'none');\r\n\t\t\t\tconsole.log('showing content');\r\n\t\t\t\tthis.renderer.setStyle(this.contentRef.nativeElement, 'display', 'block');\r\n\t\t\t\tconsole.log('start drawing');\r\n\t\t\t\tthis.drawer.setContentId('canvasContent');\r\n\t\t\t\tthis.drawer.drawDiagram(DiagramType.MOMENT_MAP, this.space.id);\r\n\t\t\t}, err => {\r\n\t\t\t\t// process error\r\n\t\t\t\t// STUB - error handler here\r\n\t\t\t\tconsole.log('ERROR!!!!');\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/canvas.component.ts","export class D3ForceLink {\r\n\tid: string;\r\n\tsource: string;\r\n\ttarget: string;\r\n\tweight: number;\r\n\r\n\tconstructor(in_id: string, src: string, tgt: string, wght?: number) {\r\n\t\tthis.id = in_id;\r\n\t\tthis.source = src;\r\n\t\tthis.target = tgt;\r\n\t\tthis.weight = (wght ? wght : 1);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/d3-force-link.ts","export class D3ForceNode {\r\n\tid: string;\r\n\tindex: number;\r\n\tradius: number;\r\n\ttext: string;\r\n\tfields: any[];\r\n\tselected: boolean;\r\n\tchildren: D3ForceNode[];\r\n\twidth: number;\r\n\r\n\tconstructor(in_id: string, cpref: string, idx: number, r: number, txt?: string, w?: number) {\r\n\t\tthis.id = cpref + in_id;\r\n\t\tthis.index = idx;\r\n\t\tthis.radius = r;\r\n\t\tthis.text = (txt ? txt : '');\r\n\t\tthis.fields = [];\r\n\t\tthis.selected = false;\r\n\t\tthis.children = [];\r\n\t\tthis.width = (w ? w : undefined);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/d3-force-node.ts","module.exports = \"<h1>ERROR!!!!!!</h1>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/error.component.html\n// module id = ./src/app/error.component.html\n// module chunks = 1","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n\ttemplateUrl: './error.component.html',\r\n})\r\nexport class ErrorComponent {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/error.component.ts","export class Message {\r\n\tid: string;\r\n\tcontent: any;\r\n\tcontentType: string;\r\n\tcreated: Date;\r\n\tupdated: Date;\r\n\tcreatedBy: string;\r\n\tspaceId: string;\r\n\r\n\tconstructor(inObj: any) {\r\n\t\tfor (let field in inObj) {\r\n\t\t\tif (typeof field !== 'string') {\r\n\t\t\t\tconsole.log(\"not a string: \" + field + \"(\" + typeof field + \")\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tswitch(field) {\r\n\t\t\t\tcase '_id':\r\n\t\t\t\t\tthis.id = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'created':\r\n\t\t\t\t\tthis.created = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'updated':\r\n\t\t\t\t\tthis.updated = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'createdBy':\r\n\t\t\t\t\tthis.createdBy = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'spaceId':\r\n\t\t\t\t\tthis.spaceId = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'content':\r\n\t\t\t\t\tthis.content = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'contentType':\r\n\t\t\t\t\tthis.contentType = inObj[field];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/message.ts","import { Inject } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\nimport { DiagramDrawer } from './diagram-drawer.interface';\r\nimport { APIService, AnnotationType } from './api.service';\r\nimport { Annotation } from './annotation'\r\nimport { D3ForceNode } from './d3-force-node';\r\nimport { D3ForceLink } from './d3-force-link';\r\n\r\n\r\ndeclare var d3: any;\r\n\r\nexport class MomentMap implements DiagramDrawer {\r\n\tmomentNodes: D3ForceNode[];\r\n\tcanvasId: string;\r\n\twidth: number;\r\n\theight: number;\r\n\t//zoomThreshold: number;\r\n\tforce: any;\r\n\tsvg: any;\r\n\tapi: APIService;\r\n\tspaceId: string;\r\n\tgraph: any;\r\n\tgraphNodes: any;\r\n\tzoom: any;\r\n\tactiveNode: any;\r\n\tgraphChildNodes: any;\r\n\tgraphChildLinks: any;\r\n\tcforce: any;\r\n\tscale: number;\r\n\r\n\tconstructor(cId: string, cH: number, cW: number, spcId: string) {\r\n\t\tthis.canvasId = cId;\r\n\t\tthis.height = cH;\r\n\t\tthis.width = cW;\r\n\t\tthis.spaceId = spcId;\r\n\t}\r\n\r\n\tinit(apiref: APIService) : void {\r\n\t\tthis.api = apiref;\r\n\t\tthis.scale = 1;\r\n\t\t// init force layout\r\n\t\tthis.force = d3.forceSimulation()\r\n\t\t\t\t\t.force('charge', d3.forceManyBody())\r\n\t\t\t\t\t.force('center', d3.forceCenter(this.width / 2, this.height / 2))\r\n\t\t\t\t\t.force('collide', d3.forceCollide((d) => { return d.radius + 10; }).iterations(16))\r\n\t\t\t\t\t.force('x', d3.forceX(0))\r\n\t\t\t\t\t.force('y', d3.forceY(0));\r\n\t\tthis.svg = d3.select(this.canvasId).append(\"svg\")\r\n\t\t\t\t\t.attr('xmlns','http://www.w3.org/2000/svg')\r\n\t\t\t\t\t.attr(\"width\", this.width)\r\n\t\t\t\t\t.attr(\"height\", this.height)\r\n\t\t\t\t\t.attr(\"id\",\"graph\")\r\n\t\t\t\t\t//.attr(\"viewBox\", \"0 0 \" + this.width + \" \" + this.height )\r\n\t\t\t\t\t//.attr(\"preserveAspectRatio\", \"xMidYMid meet\");\r\n\t\t// init top-level moments\r\n\t\tthis.momentNodes = [];\r\n\t\tthis.loadMoments().then(() => {\r\n\t\t\tthis.drawDiagram();\r\n\t\t});\r\n\t}\r\n\r\n\tloadMoments() : Promise<boolean> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.api.getAnnotations(this.spaceId, AnnotationType.MOMENT, 0, 25).subscribe(annos => {\r\n\t\t\t\tconsole.log(\"annos: \" + annos.length);\r\n\t\t\t\tfor (let i = 0; i < annos.length; i++) {\r\n\t\t\t\t\t// get moment's weight\r\n\t\t\t\t\tlet weight = 0;\r\n\t\t\t\t\tif (annos[i].fields[\"participants\"])\r\n\t\t\t\t\t\tfor (let j = 0; j < annos[i].fields[\"participants\"].length; j++) {\r\n\t\t\t\t\t\t\tweight += annos[i].fields[\"participants\"][j].messageCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t// get moment's labels\r\n\t\t\t\t\tlet text = '';\r\n\t\t\t\t\tif (annos[i].fields[\"momentSummary\"] && annos[i].fields[\"momentSummary\"][\"phrases\"])\r\n\t\t\t\t\t\tfor (let j = 0; j < annos[i].fields[\"momentSummary\"][\"phrases\"].length; j++) {\r\n\t\t\t\t\t\t\ttext += (j === 0 ? '' : ', ') + annos[i].fields[\"momentSummary\"][\"phrases\"][j].label;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tthis.momentNodes[i] = new D3ForceNode(annos[i].id, \"mm0_\", this.momentNodes.length, (100 + (10 * (weight - 5))), text);\r\n\t\t\t\t\t// get moment's start & end message dates\r\n\t\t\t\t\tif (annos[i].fields[\"startMessage\"] && annos[i].fields[\"startMessage\"][\"published\"])\r\n\t\t\t\t\t\tthis.momentNodes[i].fields[\"startDate\"] = annos[i].fields[\"startMessage\"][\"published\"];\r\n\t\t\t\t\tif (annos[i].fields[\"endMessage\"] && annos[i].fields[\"endMessage\"][\"published\"])\r\n\t\t\t\t\t\tthis.momentNodes[i].fields[\"endDate\"] = annos[i].fields[\"endMessage\"][\"published\"];\r\n\t\t\t\t}\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdrawDiagram() : void {\r\n\t\tlet width = this.width;\r\n\t\tlet height = this.height;\r\n\t\tlet ref = this;\r\n\t\t//console.log(this.momentNodes);\r\n\t\tlet node_size = d3.scaleLinear();\r\n\t    \t//.domain([5,10])\t// we know score is in this domain\r\n\t    \t//.range([1,16])\r\n\t    \t//.clamp(true);\r\n\t    // parent (canvas)\r\n\t    this.graph = this.svg.append('g').classed('chartLayer', true);\r\n\t    this.graph.attr('transform', 'translate(' + [0,0] + ')');\r\n\t    // set up zoom\r\n\t    let g = this.graph;\r\n\t\tfunction zoomed() {\r\n\t\t\tg.attr('transform', d3.event.transform);\r\n\t\t}\r\n\t\tthis.zoom = d3.zoom().scaleExtent([1, 20]).on(\"zoom\", zoomed).on(\"end\", function() {\r\n\t\t\tif (ref.activeNode)\r\n\t\t\t\tref.loadChildren();\r\n\t\t});\r\n\t\t// marker definition (for future use)\r\n\t\tthis.graph.append('defs').append('marker')\r\n\t\t\t.attr('id', 'arrow').attr('markerWidth', '10')\r\n\t\t\t.attr('markerHeight', '10').attr('refX', '0')\r\n\t\t\t.attr('refY', '3').attr('orient', 'auto')\r\n\t\t\t.attr('markerUnits', 'strokeWidth')\r\n\t\t\t.append('path').attr('d', 'M0,0 L0,6 L9,3 z')\r\n\t\t\t.attr('fill', '#000');\r\n\t\t// shadow definition (for future use)\r\n\t\tlet shadow = this.graph.select('defs').append('filter')\r\n\t\t\t.attr('id', 'shadowfilter')\r\n\t\t\t.attr('x', '0')\r\n\t\t\t.attr('y', '0')\r\n\t\t\t.attr('width', '200%')\r\n\t\t\t.attr('height', '200%');\r\n\t\tshadow.append('feOffset').attr('result', 'offOut')\r\n\t\t\t.attr('in', 'SourceAlpha')\r\n\t\t\t.attr('dx', '20')\r\n\t\t\t.attr('dy', '20');\r\n\t\tshadow.append('feGaussianBlur').attr('result', 'blurOut')\r\n\t\t\t.attr('in', 'offOut')\r\n\t\t\t.attr('stdDeviation', '10');\r\n\t\tshadow.append('feBlend')\r\n\t\t\t.attr('in', 'SourceGraphic')\r\n\t\t\t.attr('in2', 'blurOut')\r\n\t\t\t.attr('mode', 'normal');\r\n\t    // top-level nodes\r\n\t    let nodes = this.graphNodes = this.graph.append('g').attr('class','nodes')\r\n\t\t\t.selectAll(\"circle\")\r\n\t\t\t.data(this.momentNodes, function(d){ return d.id; } )\r\n\t\t\t.enter().append(\"g\")\r\n\t\t\t.attr(\"class\", \"node\")\r\n\t\t\t.attr(\"id\", function(d) { return d.id; });\r\n\t\t// draw circle\r\n\t\tlet circles = nodes.append(\"circle\")\r\n\t\t\t.attr('id', function(d) { return d.id; } )\r\n\t\t\t//.attr('class', function(d) { return 'moment-map-moment'} )\r\n\t\t\t.attr('r', function(d) { return node_size(d.radius); } )\r\n\t\t\t.attr('x', width / 2)\r\n\t\t\t.attr('y', height / 2)\r\n\t\t\t.style('fill', 'rgb(216, 216, 216)')\r\n\t\t\t.style('stroke', 'rgb(131, 131, 131)')\r\n\t\t\t.style('cursor', 'pointer');\r\n\t\t// draw label\r\n\t\tlet labels = nodes.append(\"text\")\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.attr(\"textLength\", function(d) { return 2 * d.radius - 10; })\r\n\t\t\t.classed(\"momentLabel\", true)\r\n\t\t\t.text(function (d) { return d.text; });\r\n\r\n\t\tfunction wrap (lbl) {\r\n\t\t\tlbl.each(function () {\r\n\t\t\t\tlet text = d3.select(this);\r\n\t\t\t\t//console.log(text);\r\n\t\t\t\tlet\twords = text.text().split(/\\s+/).reverse(),\r\n\t\t\t\t\tword,\r\n\t\t\t\t\tline = [],\r\n\t\t\t\t\tlineNumber = 0,\r\n\t\t\t\t\tlineHeight = 1.2, // ems\r\n\t\t\t\t\ty = text.attr(\"y\"),\r\n\t\t\t\t\tx = text.attr(\"x\"),\r\n\t\t\t\t\twidth = text.attr(\"textLength\"),\r\n\t\t\t\t\t//dy = parseFloat(text.attr(\"dy\")),\r\n\t\t\t\t\tdy = 0,\r\n\t\t\t\t\ttspan = text.text(null).append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", dy + \"em\").style('cursor', 'pointer');\r\n\t\t\t\twhile (word = words.pop()) {\r\n\t\t\t\t\tline.push(word);\r\n\t\t\t\t\ttspan.text(line.join(\" \"));\r\n\t\t\t\t\tif (tspan.node().getComputedTextLength() > width) {\r\n\t\t\t\t\t\tline.pop();\r\n\t\t\t\t\t\ttspan.text(line.join(\" \"));\r\n\t\t\t\t\t\tline = [word];\r\n\t\t\t\t\t\ttspan = text.append(\"tspan\").attr(\"dx\", 0).attr(\"y\", y).attr(\"dy\", lineHeight + dy + \"em\").text(word).style('cursor', 'pointer');\r\n\t\t\t\t\t\tlineNumber++;\r\n\t\t\t\t\t\tif (lineNumber === 3) {\r\n\t\t\t\t\t\t\ttspan = text.append(\"tspan\").attr(\"dx\", 0).attr(\"y\", y).attr(\"dy\", lineHeight + dy + \"em\").text('...').style('cursor', 'pointer');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tlabels.call(wrap);\r\n\r\n\t\t// force animation\r\n\t\tlet ticked = function () {\r\n\t\t\tnodes.attr(\"x\", function (d) { return d.x; })\r\n\t\t\t\t.attr(\"y\", function (d) { return d.y; });\r\n\t\t\tcircles.attr(\"cx\", function (d) { return d.x; })\r\n\t\t\t\t.attr(\"cy\", function (d) { return d.y; });\r\n\t\t\tlabels.attr(\"x\", function (d) { return d.x; })\r\n\t\t\t\t.attr(\"y\", function (d) { return d.y; });\r\n\t\t\tlabels.each(function() {\r\n\t\t\t\tlet text = d3.select(this);\r\n\t\t\t\tlet x = text.attr(\"x\");\r\n\t\t\t\ttext.selectAll(\"tspan\").each(function() {\r\n\t\t\t\t\tlet el = d3.select(this);\r\n\t\t\t\t\tel.attr(\"x\", x);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.force.nodes(this.momentNodes).on(\"tick\", ticked);\r\n\r\n\t\t// define zoomed in contents\r\n\t\t// STUB\r\n\t\tlet apiref = this.api;\r\n\t\tlet spcId = this.spaceId;\r\n\t\tlet svg = this.svg;\r\n\t\tlet zoom = this.zoom;\r\n\t\t// mouse events\r\n\t\tnodes.on('mouseover', function(evt) {\r\n\t\t\tlet el = d3.select(this).selectAll('circle');\r\n\t\t\tel.style('stroke', 'rgb(70, 70, 70)')\r\n\t\t\t\t.style('fill', 'rgb(160, 160, 160)');\r\n\t\t}).on('mouseout', function(evt) {\r\n\t\t\tlet el = d3.select(this).selectAll('circle');\r\n\t\t\tel.style('stroke', 'rgb(131, 131, 131)')\r\n\t\t\t\t.style('fill', 'rgb(216, 216, 216)');\r\n\t\t}).on('click', function(evt) {\r\n\t\t\tif (ref.activeNode === evt) {\r\n\t\t\t\tlet el = d3.select(this).selectAll('text');\r\n\t\t\t\tel.style('visibility', 'visible');\r\n\t\t\t\t// clear contents\r\n\t\t\t\t// stop forces\r\n\t\t\t\tref.cforce.stop();\r\n\t\t\t\tref.force = null;\r\n\t\t\t\td3.select(this).selectAll('g').remove();\r\n\t\t\t\tref.graphChildNodes = null;\r\n\t\t\t\tref.graphChildLinks = null;\r\n\t\t\t\t// set the rest up\r\n\t\t\t\tevt.selected = false;\r\n\t\t\t\tref.activeNode = null;\r\n\t\t\t\tref.scale = 1;\r\n\t\t\t\t// zoom out\r\n\t\t\t\tsvg.transition().duration(750).call(zoom.transform, d3.zoomIdentity);\r\n\t\t\t} else {\r\n\t\t\t\t// show text on the node that we transition from\r\n\t\t\t\tif (ref.activeNode) {\r\n\t\t\t\t\td3.select('g#' + ref.activeNode.id)\r\n\t\t\t\t\t\t.selectAll('text')\r\n\t\t\t\t\t\t.style('visibility', 'visible');\r\n\t\t\t\t\tref.activeNode.selected = false;\r\n\t\t\t\t}\r\n\t\t\t\tref.activeNode = evt;\r\n\t\t\t\tlet el = d3.select(this).selectAll('text');\r\n\t\t\t\t// zoom in\r\n\t\t\t\tlet scale = ref.scale = Math.max(1, Math.min(20, 1 / Math.min(2 * evt.radius / width, 2 * evt.radius / height)));\r\n\t\t\t\tlet translateX = width / 2 - scale * evt.x;\r\n\t\t\t\tlet translateY = height / 2 - scale * evt.y;\r\n\t\t\t\tsvg.transition().duration(750)\r\n\t\t\t\t\t.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(scale));\r\n\t\t\t\t\r\n\t\t\t\t// hide moment keywords\r\n\t\t\t\tel.style('visibility', 'hidden');\r\n\t\t\t\tevt.selected = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadChildren() {\r\n\t\tlet node_size = d3.scaleLinear();\r\n\t\tlet ref = this;\r\n\t\t// change contents of current active node\r\n\t\tthis.api.getMessagesBetween(this.spaceId, this.activeNode.fields['startDate'], this.activeNode.fields['endDate'], 0, 25).subscribe(msgs => {\r\n\t\t\tconsole.log(msgs);\r\n\t\t\t// spawn moment contents\r\n\t\t\tlet links = ref.graphChildLinks = [];\r\n\t\t\tlet links2 = [];\r\n\t\t\tfor (let i = 0; i < msgs.length; i++) {\r\n\t\t\t\tthis.activeNode.children[i] = new D3ForceNode(msgs[i].id, \"mm1_\", this.activeNode.children.length, 200, msgs[i].content, 200);\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\tlet id = this.activeNode.children[i - 1].id + '-' + this.activeNode.children[i].id;\r\n\t\t\t\t\tlinks[i - 1] = new D3ForceLink(id, this.activeNode.children[i - 1].id, this.activeNode.children[i].id);\r\n\t\t\t\t\tlinks2[i - 1] = new D3ForceLink(id, this.activeNode.children[i - 1].id, this.activeNode.children[i].id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet trueScale = ref.scale * Math.max(1, msgs.length / 3);\r\n\t\t\tthis.cforce = d3.forceSimulation()\r\n\t\t\t\t.force('charge', d3.forceManyBody())\r\n\t\t\t\t.force('center', d3.forceCenter(this.activeNode.x - (this.activeNode.radius / trueScale), this.activeNode.y))\r\n\t\t\t\t.force('collide', d3.forceCollide((d) => { return (((d.width * Math.sqrt(2) + 10) / trueScale) / 2); }).iterations(16))\r\n\t\t\t\t.force('x', d3.forceX(0))\r\n\t\t\t\t.force('y', d3.forceY(0))\r\n\t\t\t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(10 / trueScale))\r\n\t\t\t\t.force('link2', d3.forceLink().id(function(d) { return d.id; }).distance(100 / trueScale))\r\n\t\t\t\t.on(\"tick\", cticked);\r\n\r\n\t\t\t// start drawing\r\n\t\t\t// draw links\r\n\t\t\tlet lnks = d3.select('g#' + this.activeNode.id)\r\n\t\t    \t.append('g').attr('class','links')\r\n\t\t\t\t.selectAll(\"link\")\r\n\t\t\t\t.data(links).enter()\r\n\t\t\t\t.append('line')\r\n\t\t\t\t.attr('class', 'link')\r\n\t\t\t\t.attr('stroke-width', 4 / trueScale)\r\n\t\t\t\t.attr('stroke', 'black');\r\n\t\t\t// halflinks\r\n\t\t\tlet lnks2 = d3.select('g#' + this.activeNode.id)\r\n\t\t    \t.append('g').attr('class','halflinks')\r\n\t\t    \t.selectAll(\"halflink\")\r\n\t\t\t\t.data(links2).enter()\r\n\t\t\t\t.append('line')\r\n\t\t\t\t.attr('class', 'halflink')\r\n\t\t\t\t.attr('stroke-width', 4 / trueScale)\r\n\t\t\t\t.attr('stroke', 'black')\r\n\t\t\t\t.attr('marker-end', 'url(#arrow)');\r\n\t\t\t// draw nodes\r\n\t\t    let cnodes = this.graphChildNodes = d3.select('g#' + this.activeNode.id)\r\n\t\t    \t.append('g').attr('class','nodes')\r\n\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t.data(this.activeNode.children, function(d){ return d.id; } )\r\n\t\t\t\t.enter().append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"node\")\r\n\t\t\t\t.attr(\"id\", function(d) { return d.id; });\r\n\t\t\t// draw rectangles\r\n\t\t\tlet rects = cnodes.append(\"rect\")\r\n\t\t\t\t.attr('id', function(d) { return d.id; } )\r\n\t\t\t\t.attr('height', function(d) { console.log(d); return node_size(d.radius / trueScale); })\r\n\t\t\t\t.attr('width', function(d) { return node_size(d.width / trueScale); })\r\n\t\t\t\t.attr('rx', function(d) { return 20 / trueScale; })\r\n\t\t\t\t.attr('ry', function(d) { return 20 / trueScale; })\r\n\t\t\t\t.attr('x', this.activeNode.x)\r\n\t\t\t\t.attr('y', this.activeNode.y)\r\n\t\t\t\t.attr('stroke-width', 2 / trueScale)\r\n\t\t\t\t//.attr('filter', 'url(#shadowFilter)')\r\n\t\t\t\t.style('fill', 'rgb(186, 207, 226)')\r\n\t\t\t\t.style('stroke', 'rgb(58, 58, 58)');\r\n\t\t\t// draw labels\r\n\t\t\tlet clabels = cnodes.append(\"text\")\r\n\t\t\t\t//.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.attr(\"textLength\", function(d) { return (d.width - 40) / trueScale; })\r\n\t\t\t\t.classed(\"messageLabel\", true)\r\n\t\t\t\t.text(function (d) { return d.text; })\r\n\t\t\t\t.style('font-size', 1.5 / trueScale + 'em');\r\n\r\n\t\t\tfunction wrap (lbl) {\r\n\t\t\t\tlbl.each(function () {\r\n\t\t\t\t\tlet text = d3.select(this);\r\n\t\t\t\t\t//console.log(text);\r\n\t\t\t\t\tlet\twords = text.text().split(/\\s+/).reverse(),\r\n\t\t\t\t\t\tword,\r\n\t\t\t\t\t\tline = [],\r\n\t\t\t\t\t\tlineNumber = 0,\r\n\t\t\t\t\t\tlineHeight = 1.2, // ems\r\n\t\t\t\t\t\ty = text.attr(\"y\"),\r\n\t\t\t\t\t\tx = text.attr(\"x\"),\r\n\t\t\t\t\t\twidth = text.attr(\"textLength\"),\r\n\t\t\t\t\t\t//dy = parseFloat(text.attr(\"dy\")),\r\n\t\t\t\t\t\tdy = 0,\r\n\t\t\t\t\t\ttspan = text.text(null).append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", dy + \"em\");\r\n\t\t\t\t\twhile (word = words.pop()) {\r\n\t\t\t\t\t\tline.push(word);\r\n\t\t\t\t\t\ttspan.text(line.join(\" \"));\r\n\t\t\t\t\t\tif (tspan.node().getComputedTextLength() > width) {\r\n\t\t\t\t\t\t\tline.pop();\r\n\t\t\t\t\t\t\ttspan.text(line.join(\" \"));\r\n\t\t\t\t\t\t\tline = [word];\r\n\t\t\t\t\t\t\ttspan = text.append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", lineHeight + dy + \"em\").text(word);\r\n\t\t\t\t\t\t\tlineNumber++;\r\n\t\t\t\t\t\t\tif (lineNumber === 5) {\r\n\t\t\t\t\t\t\t\ttspan = text.append(\"tspan\").attr(\"dx\", 0).attr(\"y\", y).attr(\"dy\", lineHeight + dy + \"em\").text('...').style('cursor', 'pointer');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tclabels.call(wrap);\r\n\r\n\t\t\t// set up forces\r\n\t\t\tfunction cticked() {\r\n\t\t\t\tcnodes.attr(\"x\", function (d) { return d.x; })\r\n\t\t\t\t\t.attr(\"y\", function (d) { return d.y; });\r\n\t\t\t\trects.attr(\"x\", function (d) { return d.x - (d.width / 2 / trueScale); })\r\n\t\t\t\t\t.attr(\"y\", function (d) { return d.y - (d.radius / 2 / trueScale); });\r\n\t\t\t\tclabels.attr(\"x\", function (d) { return d.x - ((d.width - 40) / 2 / trueScale); })\r\n\t\t\t\t\t.attr(\"y\", function (d) { return d.y - ((d.radius - 120) / 2 / trueScale); });\r\n\t\t\t\tclabels.each(function() {\r\n\t\t\t\t\tlet text = d3.select(this);\r\n\t\t\t\t\tlet x = text.attr(\"x\");\r\n\t\t\t\t\ttext.selectAll(\"tspan\").each(function() {\r\n\t\t\t\t\t\tlet el = d3.select(this);\r\n\t\t\t\t\t\tel.attr(\"x\", x);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tlnks.attr('x1', function(d) { return d.source.x; })\r\n\t\t\t\t\t.attr('y1', function(d) { return d.source.y; })\r\n\t\t\t\t\t.attr('x2', function(d) { return d.target.x; })\r\n\t\t\t\t\t.attr('y2', function(d) { return d.target.y; });\r\n\t\t\t\tlnks2.attr('x1', function(d) { return d.source.x; })\r\n\t\t\t\t\t.attr('y1', function(d) { return d.source.y; })\r\n\t\t\t\t\t.attr('x2', function(d) { return (d.source.x + d.target.x) / 2; })\r\n\t\t\t\t\t.attr('y2', function(d) { return (d.source.y + d.target.y) / 2; });\r\n\t\t\t}\r\n\t\t\tthis.cforce.nodes(this.activeNode.children);\r\n\t\t\tthis.cforce.force(\"link\").links(links);\r\n\t\t\tthis.cforce.force(\"link2\").links(links2);\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/moment-map.ts","export class Space {\r\n\tid: string;\r\n\ttitle: string;\r\n\tdescription: string;\r\n\tcreated: Date;\r\n\tupdated: Date;\r\n\tcreatedBy: string;\r\n\tupdatedBy: string;\r\n\tmembersUpdated: Date;\r\n\tstate: number;\r\n\r\n\tconstructor(_id: string) {\r\n\t\tthis.id = _id;\r\n\t\tthis.state = SPACE_STATE.INITIALIZED;\r\n\t}\r\n\r\n\tloadServerData(srvSpace: any): void {\r\n\t\tif (!srvSpace.status) {\r\n\t\t\tthis.state = SPACE_STATE.ERROR;\r\n\t\t\treturn;\r\n\t\t} else\r\n\t\t\tswitch(srvSpace.status) {\r\n\t\t\tcase SERVER_SPACE_STATE.STATUS_LOADING:\r\n\t\t\t\tthis.state = SPACE_STATE.LOADING;\r\n\t\t\t\treturn;\r\n\t\t\tcase SERVER_SPACE_STATE.STATUS_ACTIVE:\r\n\t\t\t\tif (!srvSpace.title || !srvSpace.created) {\r\n\t\t\t\t\tthis.state = SPACE_STATE.ERROR;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = srvSpace.title;\r\n\t\t\t\tthis.description = srvSpace.description;\r\n\t\t\t\tthis.created = srvSpace.created;\r\n\t\t\t\tthis.updated = srvSpace.updated;\r\n\t\t\t\tthis.createdBy = srvSpace.createdBy.id;\r\n\t\t\t\tthis.updatedBy = srvSpace.updatedBy.id;\r\n\t\t\t\tthis.membersUpdated = srvSpace.membersUpdated;\r\n\t\t\t\tthis.state = SPACE_STATE.LOADED;\r\n\t\t\t\treturn;\r\n\t\t\tcase SERVER_SPACE_STATE.STATUS_NOT_FOUND:\r\n\t\t\tcase SERVER_SPACE_STATE.STATUS_ERROR:\r\n\t\t\tcase SERVER_SPACE_STATE.STATUS_OFF:\r\n\t\t\tdefault:\r\n\t\t\t\tthis.state = SPACE_STATE.ERROR;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t}\r\n}\r\n\r\nexport enum SPACE_STATE {\r\n\tINITIALIZED,\r\n\tLOADING,\r\n\tLOADED,\r\n\tERROR\r\n}\r\n\r\nenum SERVER_SPACE_STATE {\r\n\tSTATUS_OFF = 0,\r\n\tSTATUS_LOADING = 1,\r\n\tSTATUS_ACTIVE = 2,\r\n\tSTATUS_NOT_FOUND = 3,\r\n\tSTATUS_ERROR = 4\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/space.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///./src async","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA,iD;;;;;;;ACNA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA,2C;;;;;;;ACXA,gJAAgJ,OAAO,2DAA2D,+mD;;;;;;;;;;;;;;;;ACAxK;AAO1C,IAAa,YAAY;IALzB;QAME,UAAK,GAAG,KAAK,CAAC;IAChB,CAAC;IAAD,mBAAC;AAAD,CAAC;AAFY,YAAY;IALxB,wFAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,6DAAmC;QACnC,4DAAkC;KACnC,CAAC;GACW,YAAY,CAExB;AAFwB;;;;;;;;;;;;;;;;;;;ACPiC;AACjB;AAEM;AAY/C,IAAa,SAAS;IAAtB;IAAyB,CAAC;IAAD,gBAAC;AAAD,CAAC;AAAb,SAAS;IAVrB,sFAAQ,CAAC;QACR,YAAY,EAAE;YACZ,oEAAY;SACb;QACD,OAAO,EAAE;YACP,gFAAa;SACd;QACD,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,CAAC,oEAAY,CAAC;KAC1B,CAAC;GACW,SAAS,CAAI;AAAJ;;;;;;;;;ACftB;AAAA,mFAAmF;AACnF,8FAA8F;AAC9F,yEAAyE;AACzE,gFAAgF;AAEhF,mFALmF;AAK5E,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;;;;;;;;;;;;;;ACP6C;AAC4B;AAE9B;AACY;AAEzD,EAAE,CAAC,CAAC,8EAAW,CAAC,UAAU,CAAC,CAAC,CAAC;IAC3B,4FAAc,EAAE,CAAC;AACnB,CAAC;AAED,wHAAsB,EAAE,CAAC,eAAe,CAAC,kEAAS,CAAC,CAAC","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./src async recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = ./src async recursive\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = ./src/app/app.component.css\n// module chunks = 1","module.exports = \"<!--The whole content below can be removed with the new code.-->\\n<div style=\\\"text-align:center\\\">\\n  <h1>\\n    Welcome to {{title}}!!\\n  </h1>\\n  <img width=\\\"300\\\" src=\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAyNTAgMjUwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNTAgMjUwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojREQwMDMxO30NCgkuc3Qxe2ZpbGw6I0MzMDAyRjt9DQoJLnN0MntmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxnPg0KCTxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTI1LDMwIDEyNSwzMCAxMjUsMzAgMzEuOSw2My4yIDQ2LjEsMTg2LjMgMTI1LDIzMCAxMjUsMjMwIDEyNSwyMzAgMjAzLjksMTg2LjMgMjE4LjEsNjMuMiAJIi8+DQoJPHBvbHlnb24gY2xhc3M9InN0MSIgcG9pbnRzPSIxMjUsMzAgMTI1LDUyLjIgMTI1LDUyLjEgMTI1LDE1My40IDEyNSwxNTMuNCAxMjUsMjMwIDEyNSwyMzAgMjAzLjksMTg2LjMgMjE4LjEsNjMuMiAxMjUsMzAgCSIvPg0KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xMjUsNTIuMUw2Ni44LDE4Mi42aDBoMjEuN2gwbDExLjctMjkuMmg0OS40bDExLjcsMjkuMmgwaDIxLjdoMEwxMjUsNTIuMUwxMjUsNTIuMUwxMjUsNTIuMUwxMjUsNTIuMQ0KCQlMMTI1LDUyLjF6IE0xNDIsMTM1LjRIMTA4bDE3LTQwLjlMMTQyLDEzNS40eiIvPg0KPC9nPg0KPC9zdmc+DQo=\\\" />\\n</div>\\n<h2>Here are some links to help you start: </h2>\\n<ul>\\n  <li>\\n    <h2><a target=\\\"_blank\\\" href=\\\"https://angular.io/docs/ts/latest/tutorial/\\\">Tour of Heroes</a></h2>\\n  </li>\\n  <li>\\n    <h2><a target=\\\"_blank\\\" href=\\\"https://github.com/angular/angular-cli/wiki\\\">CLI Documentation</a></h2>\\n  </li>\\n  <li>\\n    <h2><a target=\\\"_blank\\\" href=\\\"http://angularjs.blogspot.ca/\\\">Angular blog</a></h2>\\n  </li>\\n</ul>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = ./src/app/app.component.html\n// module chunks = 1","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'app';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}
>>>>>>> origin/master
